{% extends "layout.html" %}

{% block title %}商户审核 - 旅游小助手管理系统{% endblock %}

{% block css %}
<style>
    /* 商户审核页面样式 */
    .merchant-review-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 30px;
    }
    
    .page-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 1px solid #e0e0e0;
    }
    
    .page-title {
        font-size: 28px;
        font-weight: 700;
        color: #2c3e50;
    }
    
    .admin-nav {
        display: flex;
        gap: 20px;
        margin-bottom: 30px;
    }
    
    .admin-nav-item {
        padding: 10px 20px;
        color: #34495e;
        text-decoration: none;
        border-radius: 4px;
        transition: all 0.3s ease;
    }
    
    .admin-nav-item:hover {
        background-color: #ecf0f1;
    }
    
    .admin-nav-item.active {
        background-color: #3498db;
        color: white;
    }
    
    /* 筛选工具栏 */
    .filter-toolbar {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        margin-bottom: 30px;
        padding: 20px;
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    
    .filter-group {
        display: flex;
        align-items: center;
        gap: 10px;
    }
    
    .filter-label {
        font-weight: 500;
        color: #34495e;
        min-width: 100px;
    }
    
    .filter-select,
    .filter-input {
        padding: 8px 12px;
        border: 1px solid #bdc3c7;
        border-radius: 4px;
        background-color: white;
        min-width: 180px;
    }
    
    .filter-actions {
        display: flex;
        gap: 10px;
        margin-left: auto;
    }
    
    .apply-filter-btn {
        padding: 8px 20px;
        background-color: #3498db;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }
    
    .apply-filter-btn:hover {
        background-color: #2980b9;
    }
    
    .reset-filter-btn {
        padding: 8px 20px;
        background-color: #ecf0f1;
        color: #34495e;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }
    
    .reset-filter-btn:hover {
        background-color: #bdc3c7;
    }
    
    /* 审核状态标签 */
    .status-badge {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 14px;
        font-weight: 500;
    }
    
    .status-pending {
        background-color: #f1c40f;
        color: white;
    }
    
    .status-approved {
        background-color: #27ae60;
        color: white;
    }
    
    .status-rejected {
        background-color: #e74c3c;
        color: white;
    }
    
    /* 商户卡片 */
    .merchant-cards {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }
    
    .merchant-card {
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        transition: all 0.3s ease;
    }
    
    .merchant-card:hover {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        transform: translateY(-2px);
    }
    
    .merchant-card-header {
        padding: 20px;
        border-bottom: 1px solid #e0e0e0;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .merchant-card-title {
        font-size: 20px;
        font-weight: 600;
        color: #2c3e50;
        margin-bottom: 5px;
    }
    
    .merchant-card-subtitle {
        color: #7f8c8d;
        font-size: 14px;
    }
    
    .merchant-card-body {
        padding: 20px;
    }
    
    .merchant-info-row {
        display: flex;
        margin-bottom: 15px;
    }
    
    .merchant-info-label {
        flex: 0 0 100px;
        font-weight: 500;
        color: #34495e;
    }
    
    .merchant-info-value {
        flex: 1;
        color: #2c3e50;
    }
    
    .merchant-images {
        display: flex;
        gap: 10px;
        margin-top: 15px;
        flex-wrap: wrap;
    }
    
    .merchant-image {
        width: 80px;
        height: 80px;
        object-fit: cover;
        border-radius: 4px;
        cursor: pointer;
        transition: transform 0.3s ease;
    }
    
    .merchant-image:hover {
        transform: scale(1.05);
    }
    
    .merchant-card-footer {
        padding: 20px;
        border-top: 1px solid #e0e0e0;
        display: flex;
        justify-content: space-between;
        align-items: center;
        background-color: #f8f9fa;
    }
    
    .merchant-card-actions {
        display: flex;
        gap: 10px;
    }
    
    .approve-btn {
        padding: 8px 20px;
        background-color: #27ae60;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }
    
    .approve-btn:hover {
        background-color: #229954;
    }
    
    .reject-btn {
        padding: 8px 20px;
        background-color: #e74c3c;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }
    
    .reject-btn:hover {
        background-color: #c0392b;
    }
    
    .view-details-btn {
        padding: 8px 20px;
        background-color: #3498db;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }
    
    .view-details-btn:hover {
        background-color: #2980b9;
    }
    
    /* 分页控件 */
    .pagination {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 10px;
        margin-top: 30px;
    }
    
    .pagination-btn {
        padding: 8px 16px;
        background-color: #ecf0f1;
        color: #34495e;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .pagination-btn:hover:not(:disabled) {
        background-color: #3498db;
        color: white;
    }
    
    .pagination-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }
    
    .pagination-btn.active {
        background-color: #3498db;
        color: white;
    }
    
    .pagination-info {
        margin: 0 20px;
        color: #7f8c8d;
    }
    
    /* 详情模态框 */
    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        justify-content: center;
        align-items: center;
        padding: 20px;
    }
    
    .modal-content {
        background-color: white;
        border-radius: 8px;
        max-width: 800px;
        width: 100%;
        max-height: 90vh;
        overflow-y: auto;
        position: relative;
    }
    
    .modal-header {
        padding: 20px;
        border-bottom: 1px solid #e0e0e0;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .modal-title {
        font-size: 24px;
        font-weight: 600;
        color: #2c3e50;
    }
    
    .close-modal {
        background: none;
        border: none;
        font-size: 24px;
        cursor: pointer;
        color: #7f8c8d;
        padding: 0;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        transition: all 0.3s ease;
    }
    
    .close-modal:hover {
        background-color: #ecf0f1;
        color: #34495e;
    }
    
    .modal-body {
        padding: 30px;
    }
    
    .merchant-detail-section {
        margin-bottom: 30px;
    }
    
    .section-title {
        font-size: 18px;
        font-weight: 600;
        color: #2c3e50;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 2px solid #3498db;
    }
    
    .detail-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 20px;
    }
    
    .detail-item {
        display: flex;
        flex-direction: column;
    }
    
    .detail-label {
        font-weight: 500;
        color: #34495e;
        margin-bottom: 5px;
    }
    
    .detail-value {
        color: #2c3e50;
        word-break: break-word;
    }
    
    .detail-full-width {
        grid-column: 1 / -1;
    }
    
    .detail-images {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
        margin-top: 10px;
    }
    
    .detail-image {
        width: 120px;
        height: 120px;
        object-fit: cover;
        border-radius: 4px;
        cursor: pointer;
        transition: transform 0.3s ease;
    }
    
    .detail-image:hover {
        transform: scale(1.05);
    }
    
    .modal-footer {
        padding: 20px;
        border-top: 1px solid #e0e0e0;
        display: flex;
        justify-content: flex-end;
        gap: 10px;
        background-color: #f8f9fa;
    }
    
    /* 拒绝理由表单 */
    .reject-reason-form {
        display: none;
        margin-top: 20px;
        padding: 20px;
        background-color: #f9f9f9;
        border-radius: 4px;
    }
    
    .reject-reason-label {
        display: block;
        font-weight: 500;
        color: #34495e;
        margin-bottom: 10px;
    }
    
    .reject-reason-textarea {
        width: 100%;
        min-height: 100px;
        padding: 10px;
        border: 1px solid #bdc3c7;
        border-radius: 4px;
        resize: vertical;
        margin-bottom: 15px;
    }
    
    /* 响应式调整 */
    @media (max-width: 1200px) {
        .merchant-cards {
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
        }
        
        .filter-toolbar {
            flex-direction: column;
            align-items: stretch;
        }
        
        .filter-actions {
            margin-left: 0;
            justify-content: flex-end;
        }
    }
    
    @media (max-width: 768px) {
        .merchant-review-container {
            padding: 20px;
        }
        
        .page-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 20px;
        }
        
        .admin-nav {
            overflow-x: auto;
            padding-bottom: 10px;
        }
        
        .merchant-cards {
            grid-template-columns: 1fr;
        }
        
        .merchant-info-row {
            flex-direction: column;
        }
        
        .merchant-info-label {
            flex: 1;
            margin-bottom: 5px;
        }
        
        .merchant-card-actions {
            flex-direction: column;
            width: 100%;
        }
        
        .modal-content {
            margin: 20px;
            width: calc(100% - 40px);
        }
        
        .modal-body {
            padding: 20px;
        }
        
        .detail-grid {
            grid-template-columns: 1fr;
        }
        
        .pagination {
            flex-wrap: wrap;
        }
        
        .pagination-info {
            width: 100%;
            text-align: center;
            margin: 10px 0;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="merchant-review-container">
    <div class="page-header">
        <h1 class="page-title">商户审核管理</h1>
        <div class="admin-info">
            <div class="admin-avatar">管</div>
            <div class="admin-details">
                <div class="admin-name">系统管理员</div>
                <div class="admin-role">超级管理员</div>
            </div>
            <button class="logout-btn">退出登录</button>
        </div>
    </div>
    
    <!-- 管理员导航 -->
    <nav class="admin-nav">
        <a href="admin_dashboard.html" class="admin-nav-item">数据看板</a>
        <a href="admin_merchant_review.html" class="admin-nav-item active">商户审核</a>
        <a href="admin_data_report.html" class="admin-nav-item">数据报表</a>
    </nav>
    
    <!-- 筛选工具栏 -->
    <div class="filter-toolbar">
        <div class="filter-group">
            <label class="filter-label">审核状态:</label>
            <select class="filter-select" id="status-filter">
                <option value="all">全部状态</option>
                <option value="pending" selected>待审核</option>
                <option value="approved">已通过</option>
                <option value="rejected">已拒绝</option>
            </select>
        </div>
        
        <div class="filter-group">
            <label class="filter-label">商家类型:</label>
            <select class="filter-select" id="merchant-type-filter">
                <option value="all">全部类型</option>
                <option value="hotel">酒店</option>
                <option value="attraction">景区</option>
                <option value="restaurant">餐饮</option>
                <option value="other">其他</option>
            </select>
        </div>
        
        <div class="filter-group">
            <label class="filter-label">所在地区:</label>
            <select class="filter-select" id="region-filter">
                <option value="all">全部地区</option>
                <option value="beijing">北京</option>
                <option value="shanghai">上海</option>
                <option value="guangzhou">广州</option>
                <option value="shenzhen">深圳</option>
                <option value="hangzhou">杭州</option>
                <option value="chengdu">成都</option>
                <option value="other">其他地区</option>
            </select>
        </div>
        
        <div class="filter-group">
            <label class="filter-label">注册日期:</label>
            <input type="date" class="filter-input" id="start-date">
            <span>至</span>
            <input type="date" class="filter-input" id="end-date">
        </div>
        
        <div class="filter-group">
            <label class="filter-label">关键词搜索:</label>
            <input type="text" class="filter-input" id="keyword-search" placeholder="输入商家名称/联系人">
        </div>
        
        <div class="filter-actions">
            <button class="reset-filter-btn" id="reset-filter-btn">重置</button>
            <button class="apply-filter-btn" id="apply-filter-btn">应用筛选</button>
        </div>
    </div>
    
    <!-- 商户卡片列表 -->
    <div class="merchant-cards">
        <!-- 商户卡片 1 -->
        <div class="merchant-card" data-merchant-id="1">
            <div class="merchant-card-header">
                <div>
                    <h3 class="merchant-card-title">北京国际大酒店</h3>
                    <p class="merchant-card-subtitle">酒店 · 北京市海淀区</p>
                </div>
                <span class="status-badge status-pending">待审核</span>
            </div>
            
            <div class="merchant-card-body">
                <div class="merchant-info-row">
                    <div class="merchant-info-label">联系人:</div>
                    <div class="merchant-info-value">张经理</div>
                </div>
                
                <div class="merchant-info-row">
                    <div class="merchant-info-label">联系电话:</div>
                    <div class="merchant-info-value">138****5678</div>
                </div>
                
                <div class="merchant-info-row">
                    <div class="merchant-info-label">邮箱:</div>
                    <div class="merchant-info-value">manager@beijinghotel.com</div>
                </div>
                
                <div class="merchant-info-row">
                    <div class="merchant-info-label">注册时间:</div>
                    <div class="merchant-info-value">2023-06-15 14:30</div>
                </div>
                
                <div class="merchant-info-row">
                    <div class="merchant-info-label">提交材料:</div>
                    <div class="merchant-info-value">营业执照、卫生许可证、消防验收证明</div>
                </div>
                
                <div class="merchant-images">
                    <img src="https://picsum.photos/seed/hotel1/200/200" alt="酒店图片1" class="merchant-image">
                    <img src="https://picsum.photos/seed/hotel2/200/200" alt="酒店图片2" class="merchant-image">
                    <img src="https://picsum.photos/seed/hotel3/200/200" alt="酒店图片3" class="merchant-image">
                </div>
            </div>
            
            <div class="merchant-card-footer">
                <div>待审核时间: 2天</div>
                <div class="merchant-card-actions">
                    <button class="view-details-btn" onclick="openMerchantDetails(1)">查看详情</button>
                    <button class="approve-btn" onclick="approveMerchant(1)">通过</button>
                    <button class="reject-btn" onclick="showRejectReasonForm(1)">拒绝</button>
                </div>
            </div>
        </div>
        
        <!-- 商户卡片 2 -->
        <div class="merchant-card" data-merchant-id="2">
            <div class="merchant-card-header">
                <div>
                    <h3 class="merchant-card-title">上海迪士尼乐园</h3>
                    <p class="merchant-card-subtitle">景区 · 上海市浦东新区</p>
                </div>
                <span class="status-badge status-pending">待审核</span>
            </div>
            
            <div class="merchant-card-body">
                <div class="merchant-info-row">
                    <div class="merchant-info-label">联系人:</div>
                    <div class="merchant-info-value">李主管</div>
                </div>
                
                <div class="merchant-info-row">
                    <div class="merchant-info-label">联系电话:</div>
                    <div class="merchant-info-value">139****6789</div>
                </div>
                
                <div class="merchant-info-row">
                    <div class="merchant-info-label">邮箱:</div>
                    <div class="merchant-info-value">admin@shanghaidisney.com</div>
                </div>
                
                <div class="merchant-info-row">
                    <div class="merchant-info-label">注册时间:</div>
                    <div class="merchant-info-value">2023-06-16 10:15</div>
                </div>
                
                <div class="merchant-info-row">
                    <div class="merchant-info-label">提交材料:</div>
                    <div class="merchant-info-value">营业执照、特种设备检验证明、安全许可证</div>
                </div>
                
                <div class="merchant-images">
                    <img src="https://picsum.photos/seed/attraction1/200/200" alt="景区图片1" class="merchant-image">
                    <img src="https://picsum.photos/seed/attraction2/200/200" alt="景区图片2" class="merchant-image">
                    <img src="https://picsum.photos/seed/attraction3/200/200" alt="景区图片3" class="merchant-image">
                </div>
            </div>
            
            <div class="merchant-card-footer">
                <div>待审核时间: 1天</div>
                <div class="merchant-card-actions">
                    <button class="view-details-btn" onclick="openMerchantDetails(2)">查看详情</button>
                    <button class="approve-btn" onclick="approveMerchant(2)">通过</button>
                    <button class="reject-btn" onclick="showRejectReasonForm(2)">拒绝</button>
                </div>
            </div>
        </div>
        
        <!-- 商户卡片 3 -->
        <div class="merchant-card" data-merchant-id="3">
            <div class="merchant-card-header">
                <div>
                    <h3 class="merchant-card-title">杭州西湖楼外楼</h3>
                    <p class="merchant-card-subtitle">餐饮 · 杭州市西湖区</p>
                </div>
                <span class="status-badge status-pending">待审核</span>
            </div>
            
            <div class="merchant-card-body">
                <div class="merchant-info-row">
                    <div class="merchant-info-label">联系人:</div>
                    <div class="merchant-info-value">王老板</div>
                </div>
                
                <div class="merchant-info-row">
                    <div class="merchant-info-label">联系电话:</div>
                    <div class="merchant-info-value">137****7890</div>
                </div>
                
                <div class="merchant-info-row">
                    <div class="merchant-info-label">邮箱:</div>
                    <div class="merchant-info-value">owner@louwailou.com</div>
                </div>
                
                <div class="merchant-info-row">
                    <div class="merchant-info-label">注册时间:</div>
                    <div class="merchant-info-value">2023-06-17 09:45</div>
                </div>
                
                <div class="merchant-info-row">
                    <div class="merchant-info-label">提交材料:</div>
                    <div class="merchant-info-value">营业执照、食品经营许可证、健康证</div>
                </div>
                
                <div class="merchant-images">
                    <img src="https://picsum.photos/seed/restaurant1/200/200" alt="餐厅图片1" class="merchant-image">
                    <img src="https://picsum.photos/seed/restaurant2/200/200" alt="餐厅图片2" class="merchant-image">
                    <img src="https://picsum.photos/seed/restaurant3/200/200" alt="餐厅图片3" class="merchant-image">
                </div>
            </div>
            
            <div class="merchant-card-footer">
                <div>待审核时间: 0天</div>
                <div class="merchant-card-actions">
                    <button class="view-details-btn" onclick="openMerchantDetails(3)">查看详情</button>
                    <button class="approve-btn" onclick="approveMerchant(3)">通过</button>
                    <button class="reject-btn" onclick="showRejectReasonForm(3)">拒绝</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 分页控件 -->
    <div class="pagination">
        <button class="pagination-btn" id="prev-page" disabled>上一页</button>
        <span class="pagination-info">第 1/5 页，共 12 条记录</span>
        <button class="pagination-btn" id="next-page">下一页</button>
    </div>
</div>

<!-- 商户详情模态框 -->
<div class="modal" id="merchant-details-modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title" id="modal-merchant-name">商户详情</h3>
            <button class="close-modal" onclick="closeMerchantDetails()">×</button>
        </div>
        
        <div class="modal-body">
            <div class="merchant-detail-section">
                <h4 class="section-title">基本信息</h4>
                <div class="detail-grid">
                    <div class="detail-item">
                        <span class="detail-label">商家名称:</span>
                        <span class="detail-value" id="detail-merchant-name">北京国际大酒店</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">商家类型:</span>
                        <span class="detail-value" id="detail-merchant-type">酒店</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">联系人:</span>
                        <span class="detail-value" id="detail-contact-person">张经理</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">联系电话:</span>
                        <span class="detail-value" id="detail-contact-phone">138****5678</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">邮箱:</span>
                        <span class="detail-value" id="detail-contact-email">manager@beijinghotel.com</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">注册时间:</span>
                        <span class="detail-value" id="detail-register-time">2023-06-15 14:30</span>
                    </div>
                </div>
            </div>
            
            <div class="merchant-detail-section">
                <h4 class="section-title">位置信息</h4>
                <div class="detail-grid">
                    <div class="detail-item detail-full-width">
                        <span class="detail-label">详细地址:</span>
                        <span class="detail-value" id="detail-address">北京市海淀区中关村南大街5号</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">所在城市:</span>
                        <span class="detail-value" id="detail-city">北京市</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">所在区域:</span>
                        <span class="detail-value" id="detail-district">海淀区</span>
                    </div>
                </div>
            </div>
            
            <div class="merchant-detail-section">
                <h4 class="section-title">营业时间</h4>
                <div class="detail-grid">
                    <div class="detail-item">
                        <span class="detail-label">周一至周五:</span>
                        <span class="detail-value" id="detail-weekday-hours">08:00 - 22:00</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">周六至周日:</span>
                        <span class="detail-value" id="detail-weekend-hours">08:00 - 23:00</span>
                    </div>
                </div>
            </div>
            
            <div class="merchant-detail-section">
                <h4 class="section-title">服务项目</h4>
                <div class="detail-grid detail-full-width">
                    <div class="detail-value" id="detail-services">
                        <ul>
                            <li>豪华套房预订</li>
                            <li>商务会议服务</li>
                            <li>中西餐厅</li>
                            <li>健身房</li>
                            <li>游泳池</li>
                            <li>SPA中心</li>
                            <li>免费WiFi</li>
                            <li>24小时前台服务</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="merchant-detail-section">
                <h4 class="section-title">商家描述</h4>
                <div class="detail-grid detail-full-width">
                    <div class="detail-value" id="detail-description">
                        北京国际大酒店位于北京市海淀区中关村南大街，是一家五星级豪华酒店，拥有客房300余间，提供豪华套房、行政套房等多种房型选择。酒店内设有中西餐厅、健身房、游泳池、SPA中心等完善设施，是商务出行和旅游度假的理想选择。
                    </div>
                </div>
            </div>
            
            <div class="merchant-detail-section">
                <h4 class="section-title">提交材料</h4>
                <div class="detail-grid">
                    <div class="detail-item detail-full-width">
                        <span class="detail-label">材料清单:</span>
                        <span class="detail-value" id="detail-documents">营业执照、卫生许可证、消防验收证明、特种行业许可证</span>
                    </div>
                </div>
            </div>
            
            <div class="merchant-detail-section">
                <h4 class="section-title">商家图片</h4>
                <div class="detail-images" id="detail-images">
                    <img src="https://picsum.photos/seed/hotel1/200/200" alt="酒店图片1" class="detail-image">
                    <img src="https://picsum.photos/seed/hotel2/200/200" alt="酒店图片2" class="detail-image">
                    <img src="https://picsum.photos/seed/hotel3/200/200" alt="酒店图片3" class="detail-image">
                    <img src="https://picsum.photos/seed/hotel4/200/200" alt="酒店图片4" class="detail-image">
                    <img src="https://picsum.photos/seed/hotel5/200/200" alt="酒店图片5" class="detail-image">
                </div>
            </div>
        </div>
        
        <div class="modal-footer">
            <button class="reject-btn" onclick="showRejectReasonFormInModal()">拒绝</button>
            <button class="approve-btn" onclick="approveMerchantInModal()">通过</button>
            <button class="view-details-btn" onclick="closeMerchantDetails()">关闭</button>
        </div>
        
        <!-- 拒绝理由表单 -->
        <div class="reject-reason-form" id="reject-reason-form">
            <label class="reject-reason-label">拒绝理由:</label>
            <textarea class="reject-reason-textarea" id="reject-reason" placeholder="请输入拒绝理由..."></textarea>
            <div class="modal-footer">
                <button class="view-details-btn" onclick="cancelReject()">取消</button>
                <button class="reject-btn" onclick="submitRejectReason()">确认拒绝</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // 当前选中的商户ID
        let currentMerchantId = null;
        
        // 应用筛选按钮
        const applyFilterBtn = document.getElementById('apply-filter-btn');
        applyFilterBtn.addEventListener('click', function() {
            // 获取筛选条件
            const status = document.getElementById('status-filter').value;
            const merchantType = document.getElementById('merchant-type-filter').value;
            const region = document.getElementById('region-filter').value;
            const startDate = document.getElementById('start-date').value;
            const endDate = document.getElementById('end-date').value;
            const keyword = document.getElementById('keyword-search').value;
            
            // 显示加载状态
            this.disabled = true;
            this.textContent = '加载中...';
            
            // 模拟数据加载
            setTimeout(() => {
                // 这里可以添加实际的筛选逻辑
                // 显示成功提示
                showAlert('筛选条件已应用', 'success');
                
                // 恢复按钮状态
                this.disabled = false;
                this.textContent = '应用筛选';
            }, 1000);
        });
        
        // 重置筛选按钮
        const resetFilterBtn = document.getElementById('reset-filter-btn');
        resetFilterBtn.addEventListener('click', function() {
            // 重置所有筛选条件
            document.getElementById('status-filter').value = 'all';
            document.getElementById('merchant-type-filter').value = 'all';
            document.getElementById('region-filter').value = 'all';
            document.getElementById('start-date').value = '';
            document.getElementById('end-date').value = '';
            document.getElementById('keyword-search').value = '';
            
            // 显示成功提示
            showAlert('筛选条件已重置', 'info');
        });
        
        // 分页按钮
        const prevPageBtn = document.getElementById('prev-page');
        const nextPageBtn = document.getElementById('next-page');
        
        prevPageBtn.addEventListener('click', function() {
            if (this.disabled) return;
            
            // 显示加载状态
            this.disabled = true;
            nextPageBtn.disabled = true;
            
            // 模拟页面加载
            setTimeout(() => {
                // 更新页码信息
                document.querySelector('.pagination-info').textContent = '第 0/5 页，共 12 条记录';
                
                // 更新按钮状态
                this.disabled = true;
                nextPageBtn.disabled = false;
                
                // 显示成功提示
                showAlert('已切换到上一页', 'info');
            }, 500);
        });
        
        nextPageBtn.addEventListener('click', function() {
            if (this.disabled) return;
            
            // 显示加载状态
            this.disabled = true;
            prevPageBtn.disabled = true;
            
            // 模拟页面加载
            setTimeout(() => {
                // 更新页码信息
                document.querySelector('.pagination-info').textContent = '第 2/5 页，共 12 条记录';
                
                // 更新按钮状态
                this.disabled = false;
                prevPageBtn.disabled = false;
                
                // 显示成功提示
                showAlert('已切换到下一页', 'info');
            }, 500);
        });
        
        // 退出登录按钮
        document.querySelector('.logout-btn').addEventListener('click', function() {
            if (confirm('确定要退出登录吗？')) {
                // 清除登录状态
                localStorage.removeItem('adminLoggedIn');
                localStorage.removeItem('adminUsername');
                
                // 跳转到登录页面
                window.location.href = 'admin_login.html';
            }
        });
    });
    
    // 打开商户详情模态框
    function openMerchantDetails(merchantId) {
        // 保存当前商户ID
        currentMerchantId = merchantId;
        
        // 根据商户ID加载对应的数据
        // 这里使用模拟数据，实际应用中应该从后端API获取
        
        let merchantData = null;
        
        if (merchantId === 1) {
            merchantData = {
                name: '北京国际大酒店',
                type: '酒店',
                contactPerson: '张经理',
                contactPhone: '138****5678',
                contactEmail: 'manager@beijinghotel.com',
                registerTime: '2023-06-15 14:30',
                address: '北京市海淀区中关村南大街5号',
                city: '北京市',
                district: '海淀区',
                weekdayHours: '08:00 - 22:00',
                weekendHours: '08:00 - 23:00',
                services: ['豪华套房预订', '商务会议服务', '中西餐厅', '健身房', '游泳池', 'SPA中心', '免费WiFi', '24小时前台服务'],
                description: '北京国际大酒店位于北京市海淀区中关村南大街，是一家五星级豪华酒店，拥有客房300余间，提供豪华套房、行政套房等多种房型选择。酒店内设有中西餐厅、健身房、游泳池、SPA中心等完善设施，是商务出行和旅游度假的理想选择。',
                documents: '营业执照、卫生许可证、消防验收证明、特种行业许可证'
            };
        } else if (merchantId === 2) {
            merchantData = {
                name: '上海迪士尼乐园',
                type: '景区',
                contactPerson: '李主管',
                contactPhone: '139****6789',
                contactEmail: 'admin@shanghaidisney.com',
                registerTime: '2023-06-16 10:15',
                address: '上海市浦东新区川沙镇黄赵路310号',
                city: '上海市',
                district: '浦东新区',
                weekdayHours: '08:00 - 20:00',
                weekendHours: '08:00 - 21:00',
                services: ['主题公园游览', '游乐设施体验', '演出表演', '餐饮服务', '纪念品商店', 'VIP服务', '无障碍设施'],
                description: '上海迪士尼乐园是中国内地首座迪士尼主题乐园，于2016年开业，拥有七大主题园区、两座主题酒店和一座迪士尼小镇。乐园内有众多精彩的游乐设施、精彩的演出和丰富的餐饮购物选择，是家庭出游的热门目的地。',
                documents: '营业执照、特种设备检验证明、安全许可证、卫生许可证'
            };
        } else if (merchantId === 3) {
            merchantData = {
                name: '杭州西湖楼外楼',
                type: '餐饮',
                contactPerson: '王老板',
                contactPhone: '137****7890',
                contactEmail: 'owner@louwailou.com',
                registerTime: '2023-06-17 09:45',
                address: '杭州市西湖区孤山路30号',
                city: '杭州市',
                district: '西湖区',
                weekdayHours: '10:00 - 22:00',
                weekendHours: '09:30 - 22:30',
                services: ['杭帮菜', '湖景包间', '宴会服务', '茶艺表演', '外卖服务', '免费停车'],
                description: '楼外楼是杭州著名的百年老字号餐厅，创立于1848年，以杭帮菜闻名中外。餐厅位于西湖边，环境优雅，可以欣赏西湖美景。特色菜品包括西湖醋鱼、叫花鸡、龙井虾仁等，是品尝杭州美食的必去之处。',
                documents: '营业执照、食品经营许可证、健康证、酒类经营许可证'
            };
        }
        
        // 更新模态框内容
        document.getElementById('modal-merchant-name').textContent = `${merchantData.name} - 详情`;
        document.getElementById('detail-merchant-name').textContent = merchantData.name;
        document.getElementById('detail-merchant-type').textContent = merchantData.type;
        document.getElementById('detail-contact-person').textContent = merchantData.contactPerson;
        document.getElementById('detail-contact-phone').textContent = merchantData.contactPhone;
        document.getElementById('detail-contact-email').textContent = merchantData.contactEmail;
        document.getElementById('detail-register-time').textContent = merchantData.registerTime;
        document.getElementById('detail-address').textContent = merchantData.address;
        document.getElementById('detail-city').textContent = merchantData.city;
        document.getElementById('detail-district').textContent = merchantData.district;
        document.getElementById('detail-weekday-hours').textContent = merchantData.weekdayHours;
        document.getElementById('detail-weekend-hours').textContent = merchantData.weekendHours;
        document.getElementById('detail-description').textContent = merchantData.description;
        document.getElementById('detail-documents').textContent = merchantData.documents;
        
        // 更新服务列表
        const servicesList = document.createElement('ul');
        merchantData.services.forEach(service => {
            const li = document.createElement('li');
            li.textContent = service;
            servicesList.appendChild(li);
        });
        const detailServices = document.getElementById('detail-services');
        detailServices.innerHTML = '';
        detailServices.appendChild(servicesList);
        
        // 显示模态框
        document.getElementById('merchant-details-modal').style.display = 'flex';
    }
    
    // 关闭商户详情模态框
    function closeMerchantDetails() {
        document.getElementById('merchant-details-modal').style.display = 'none';
        document.getElementById('reject-reason-form').style.display = 'none';
        document.getElementById('reject-reason').value = '';
    }
    
    // 显示拒绝理由表单（卡片中的按钮）
    function showRejectReasonForm(merchantId) {
        // 保存当前商户ID
        currentMerchantId = merchantId;
        
        // 这里可以添加显示拒绝理由表单的逻辑
        // 通常在实际应用中，可能会弹出一个简单的对话框
        const reason = prompt('请输入拒绝理由:');
        
        if (reason) {
            // 用户输入了理由，提交拒绝
            rejectMerchant(merchantId, reason);
        }
    }
    
    // 显示拒绝理由表单（模态框中的按钮）
    function showRejectReasonFormInModal() {
        document.getElementById('reject-reason-form').style.display = 'block';
    }
    
    // 取消拒绝
    function cancelReject() {
        document.getElementById('reject-reason-form').style.display = 'none';
        document.getElementById('reject-reason').value = '';
    }
    
    // 提交拒绝理由
    function submitRejectReason() {
        const reason = document.getElementById('reject-reason').value;
        
        if (!reason) {
            showAlert('请输入拒绝理由', 'error');
            return;
        }
        
        // 提交拒绝
        rejectMerchant(currentMerchantId, reason);
        
        // 关闭模态框
        closeMerchantDetails();
    }
    
    // 批准商户
    function approveMerchant(merchantId) {
        if (confirm('确定要批准该商户吗？')) {
            // 显示加载状态
            const merchantCard = document.querySelector(`.merchant-card[data-merchant-id="${merchantId}"]`);
            const approveBtn = merchantCard.querySelector('.approve-btn');
            const rejectBtn = merchantCard.querySelector('.reject-btn');
            const viewDetailsBtn = merchantCard.querySelector('.view-details-btn');
            
            approveBtn.disabled = true;
            rejectBtn.disabled = true;
            viewDetailsBtn.disabled = true;
            
            // 模拟审批过程
            setTimeout(() => {
                // 更新商户状态
                const statusBadge = merchantCard.querySelector('.status-badge');
                statusBadge.textContent = '已通过';
                statusBadge.className = 'status-badge status-approved';
                
                // 显示成功提示
                showAlert('商户审批已通过', 'success');
            }, 1000);
        }
    }
    
    // 在模态框中批准商户
    function approveMerchantInModal() {
        if (confirm('确定要批准该商户吗？')) {
            // 模拟审批过程
            setTimeout(() => {
                // 关闭模态框
                closeMerchantDetails();
                
                // 更新商户卡片状态
                const merchantCard = document.querySelector(`.merchant-card[data-merchant-id="${currentMerchantId}"]`);
                if (merchantCard) {
                    const statusBadge = merchantCard.querySelector('.status-badge');
                    statusBadge.textContent = '已通过';
                    statusBadge.className = 'status-badge status-approved';
                    
                    const approveBtn = merchantCard.querySelector('.approve-btn');
                    const rejectBtn = merchantCard.querySelector('.reject-btn');
                    approveBtn.disabled = true;
                    rejectBtn.disabled = true;
                }
                
                // 显示成功提示
                showAlert('商户审批已通过', 'success');
            }, 1000);
        }
    }
    
    // 拒绝商户
    function rejectMerchant(merchantId, reason) {
        // 显示加载状态
        const merchantCard = document.querySelector(`.merchant-card[data-merchant-id="${merchantId}"]`);
        if (merchantCard) {
            const approveBtn = merchantCard.querySelector('.approve-btn');
            const rejectBtn = merchantCard.querySelector('.reject-btn');
            const viewDetailsBtn = merchantCard.querySelector('.view-details-btn');
            
            approveBtn.disabled = true;
            rejectBtn.disabled = true;
            viewDetailsBtn.disabled = true;
            
            // 模拟拒绝过程
            setTimeout(() => {
                // 更新商户状态
                const statusBadge = merchantCard.querySelector('.status-badge');
                statusBadge.textContent = '已拒绝';
                statusBadge.className = 'status-badge status-rejected';
                
                // 显示成功提示
                showAlert('商户审批已拒绝', 'success');
            }, 1000);
        }
    }
    
    // 点击模态框外部关闭模态框
    window.addEventListener('click', function(event) {
        const modal = document.getElementById('merchant-details-modal');
        if (event.target === modal) {
            closeMerchantDetails();
        }
    });
    
    // 阻止模态框内部点击事件冒泡
    document.querySelector('.modal-content').addEventListener('click', function(event) {
        event.stopPropagation();
    });
</script>
{% endblock %}